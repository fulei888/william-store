{"ast":null,"code":"import _regeneratorRuntime from\"/Users/leifu/Documents/amazona-Video-05-Sidebar/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/leifu/Documents/amazona-Video-05-Sidebar/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import Axios from\"axios\";import Cookie from'js-cookie';import{USER_SIGNIN_REQUEST,USER_SIGNIN_SUCCESS,USER_SIGNIN_FAIL,USER_REGISTER_REQUEST,USER_REGISTER_SUCCESS,USER_REGISTER_FAIL,USER_LOGOUT,USER_UPDATE_REQUEST,USER_UPDATE_SUCCESS,USER_UPDATE_FAIL}from\"../constants/userConstants\";var signin=function signin(email,password){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var _yield$Axios$post,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch({type:USER_SIGNIN_REQUEST,payload:{email:email,password:password}});_context.prev=1;_context.next=4;return Axios.post(\"/api/users/signin\",{email:email,password:password});case 4:_yield$Axios$post=_context.sent;data=_yield$Axios$post.data;console.log(\"action data\",data);dispatch({type:USER_SIGNIN_SUCCESS,payload:data});Cookie.set('userInfo',JSON.stringify(data));_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](1);dispatch({type:USER_SIGNIN_FAIL,payload:_context.t0.message});case 14:case\"end\":return _context.stop();}}},_callee,null,[[1,11]]);}));return function(_x){return _ref.apply(this,arguments);};}();};var update=function update(_ref2){var userId=_ref2.userId,name=_ref2.name,email=_ref2.email,password=_ref2.password;return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch,getState){var _getState,userInfo,_yield$Axios$put,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_getState=getState(),userInfo=_getState.userSignin.userInfo;dispatch({type:USER_UPDATE_REQUEST,payload:{userId:userId,name:name,email:email,password:password}});_context2.prev=2;_context2.next=5;return Axios.put(\"/api/users/\"+userId,{name:name,email:email,password:password},{headers:{Authorization:'Bearer '+userInfo.token}});case 5:_yield$Axios$put=_context2.sent;data=_yield$Axios$put.data;dispatch({type:USER_UPDATE_SUCCESS,payload:data});Cookie.set('userInfo',JSON.stringify(data));_context2.next=14;break;case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](2);dispatch({type:USER_UPDATE_FAIL,payload:_context2.t0.message});case 14:case\"end\":return _context2.stop();}}},_callee2,null,[[2,11]]);}));return function(_x2,_x3){return _ref3.apply(this,arguments);};}();};var register=function register(name,email,password){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){var _yield$Axios$post2,data;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:dispatch({type:USER_REGISTER_REQUEST,payload:{name:name,email:email,password:password}});_context3.prev=1;_context3.next=4;return Axios.post(\"/api/users/register\",{name:name,email:email,password:password});case 4:_yield$Axios$post2=_context3.sent;data=_yield$Axios$post2.data;console.log(\"action data\",data);dispatch({type:USER_REGISTER_SUCCESS,payload:data});_context3.next=13;break;case 10:_context3.prev=10;_context3.t0=_context3[\"catch\"](1);dispatch({type:USER_REGISTER_FAIL,payload:_context3.t0.message});case 13:case\"end\":return _context3.stop();}}},_callee3,null,[[1,10]]);}));return function(_x4){return _ref4.apply(this,arguments);};}();};var logout=function logout(){return/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:Cookie.remove('userInfo');dispatch({type:USER_LOGOUT});case 2:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x5){return _ref5.apply(this,arguments);};}();};export{signin,register,logout,update};","map":{"version":3,"sources":["/Users/leifu/Documents/amazona-Video-05-Sidebar/frontend/src/actions/userActions.js"],"names":["Axios","Cookie","USER_SIGNIN_REQUEST","USER_SIGNIN_SUCCESS","USER_SIGNIN_FAIL","USER_REGISTER_REQUEST","USER_REGISTER_SUCCESS","USER_REGISTER_FAIL","USER_LOGOUT","USER_UPDATE_REQUEST","USER_UPDATE_SUCCESS","USER_UPDATE_FAIL","signin","email","password","dispatch","type","payload","post","data","console","log","set","JSON","stringify","message","update","userId","name","getState","userInfo","userSignin","put","headers","Authorization","token","register","logout","remove"],"mappings":"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","sourcesContent":["import Axios from \"axios\";\nimport Cookie from 'js-cookie';\nimport { USER_SIGNIN_REQUEST, USER_SIGNIN_SUCCESS, USER_SIGNIN_FAIL, USER_REGISTER_REQUEST, USER_REGISTER_SUCCESS, USER_REGISTER_FAIL, USER_LOGOUT, USER_UPDATE_REQUEST, USER_UPDATE_SUCCESS, USER_UPDATE_FAIL } from \"../constants/userConstants\";\nconst signin = (email, password) => async dispatch => {\n    dispatch({type: USER_SIGNIN_REQUEST, payload: {email, password}});\n    try{\n        const {data} = await Axios.post(\"/api/users/signin\", {email, password})\n        console.log(\"action data\", data);\n        dispatch({type: USER_SIGNIN_SUCCESS, payload: data});\n        Cookie.set('userInfo', JSON.stringify(data));\n    } catch (error) {\n        dispatch({type: USER_SIGNIN_FAIL, payload: error.message});\n    }\n}\n\nconst update = ({userId, name, email, password}) => async (dispatch, getState) => {\n    const {userSignin : {userInfo}} = getState();\n    dispatch({type: USER_UPDATE_REQUEST, payload: {userId, name, email, password}});\n    try{\n        const {data} = await Axios.put(\"/api/users/\" + userId, \n        {name, email, password}, {\n            headers: {\n                Authorization: 'Bearer ' +  userInfo.token\n            }\n        })\n        dispatch({type: USER_UPDATE_SUCCESS, payload: data});\n        Cookie.set('userInfo', JSON.stringify(data));\n    } catch (error) {\n        dispatch({type: USER_UPDATE_FAIL, payload: error.message});\n    }\n}\nconst register = (name, email, password) => async dispatch => {\n    dispatch({type: USER_REGISTER_REQUEST, payload: {name, email, password}});\n    try{\n        const {data} = await Axios.post(\"/api/users/register\", {name,email, password})\n        console.log(\"action data\", data);\n        dispatch({type: USER_REGISTER_SUCCESS, payload: data});\n    } catch (error) {\n        dispatch({type: USER_REGISTER_FAIL, payload: error.message});\n    }\n}\nconst logout = () => async dispatch => {\n    Cookie.remove('userInfo');\n    dispatch({type: USER_LOGOUT});\n}\nexport {signin, register,logout, update};"]},"metadata":{},"sourceType":"module"}