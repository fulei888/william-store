{"ast":null,"code":"import _toConsumableArray from\"/Users/leifu/Documents/amazona-Video-05-Sidebar/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import React,{useEffect}from'react';import{addToCart,removeFromCart}from'../actions/cartActions';import{useDispatch,useSelector}from'react-redux';import{Link}from'react-router-dom';function CartScreen(props){var cart=useSelector(function(state){return state.cart;});var cartItems=cart.cartItems;console.log('cartItems',cartItems);var productId=props.match.params.id;var qty=props.location.search?Number(props.location.search.split(\"=\")[1]):1;var dispatch=useDispatch();var removeFromCartHandler=function removeFromCartHandler(productId){dispatch(removeFromCart(productId));};useEffect(function(){if(productId){dispatch(addToCart(productId,qty));}},[]);var checkoutHandler=function checkoutHandler(){props.history.push(\"/signin?redirect=shipping\");};return/*#__PURE__*/React.createElement(\"div\",{className:\"cart\"},/*#__PURE__*/React.createElement(\"div\",{className:\"cart-list\"},/*#__PURE__*/React.createElement(\"ul\",{className:\"cart-list-container\"},/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"h3\",null,\"Shopping Cart\"),/*#__PURE__*/React.createElement(\"div\",null,\"Price\")),cartItems.length===0?/*#__PURE__*/React.createElement(\"div\",null,\"Cart is empty\"):cartItems.map(function(item){return/*#__PURE__*/React.createElement(\"li\",{key:item.product},/*#__PURE__*/React.createElement(\"div\",{className:\"cart-image\"},/*#__PURE__*/React.createElement(\"img\",{src:item.image,alt:\"product\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"cart-name\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Link,{to:\"/product/\"+item.product},item.name)),/*#__PURE__*/React.createElement(\"div\",null,\"Qty:\",/*#__PURE__*/React.createElement(\"select\",{value:item.qty,onChange:function onChange(e){return dispatch(addToCart(item.product,e.target.value));}},_toConsumableArray(Array(item.countInStock).keys()).map(function(x){return/*#__PURE__*/React.createElement(\"option\",{key:'b'+x+1,value:x+1},x+1);})),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"button\",onClick:function onClick(){return removeFromCartHandler(item.product);}},\"Delete\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"cart-price\"},\"$\",item.price*item.qty));}))),/*#__PURE__*/React.createElement(\"div\",{className:\"cart-action\"},/*#__PURE__*/React.createElement(\"h3\",null,\"Subtotal ( \",cartItems.reduce(function(a,c){return a+parseInt(c.qty);},0),\" items) : $ \",cartItems.reduce(function(a,c){return a+c.price*c.qty;},0)),/*#__PURE__*/React.createElement(\"button\",{onClick:checkoutHandler,className:\"button primary full-width\",disabled:cartItems.length===0},\"Proceed to Checkout\")));}export default CartScreen;","map":{"version":3,"sources":["/Users/leifu/Documents/amazona-Video-05-Sidebar/frontend/src/Screens/CartScreen.js"],"names":["React","useEffect","addToCart","removeFromCart","useDispatch","useSelector","Link","CartScreen","props","cart","state","cartItems","console","log","productId","match","params","id","qty","location","search","Number","split","dispatch","removeFromCartHandler","checkoutHandler","history","push","length","map","item","product","image","name","e","target","value","Array","countInStock","keys","x","price","reduce","a","c","parseInt"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport { addToCart, removeFromCart } from '../actions/cartActions';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Link } from 'react-router-dom';\nfunction CartScreen(props) {\n\n  const cart = useSelector(state => state.cart);\n\n  const { cartItems } = cart;\n  console.log('cartItems',cartItems);\n  const productId = props.match.params.id;\n  const qty = props.location.search ? Number(props.location.search.split(\"=\")[1]) : 1;\n  const dispatch = useDispatch();\n  const removeFromCartHandler = (productId) => {\n    dispatch(removeFromCart(productId));\n  }\n  useEffect(() => {\n    if (productId) {\n      dispatch(addToCart(productId, qty));\n    }\n  }, []);\n\n  const checkoutHandler = () => {\n    props.history.push(\"/signin?redirect=shipping\");\n  }\n\n  return <div className=\"cart\">\n    <div className=\"cart-list\">\n      <ul className=\"cart-list-container\">\n        <li>\n          <h3>\n            Shopping Cart\n          </h3>\n          <div>\n            Price\n          </div>\n        </li>\n        {\n          cartItems.length === 0 ?\n            <div>\n              Cart is empty\n          </div>\n            :\n            cartItems.map(item =>\n              <li key={item.product}>\n                <div className=\"cart-image\">\n                  <img src={item.image} alt=\"product\" />\n                </div>\n                <div className=\"cart-name\">\n                  <div>\n                    <Link to={\"/product/\" + item.product}>\n                      {item.name}\n                    </Link>\n\n                  </div>\n                  <div>\n                    Qty:\n                  <select value={item.qty} onChange={(e) => dispatch(addToCart(item.product, e.target.value))}>\n                      {[...Array(item.countInStock).keys()].map(x =>\n                        <option key={'b'+x + 1} value={x + 1}>{x + 1}</option>\n                      )}\n                    </select>\n                    <button type=\"button\" className=\"button\" onClick={() => removeFromCartHandler(item.product)} >\n                      Delete\n                    </button>\n                  </div>\n                </div>\n                <div className=\"cart-price\">\n                  ${item.price*item.qty}\n                </div>\n              </li>\n            )\n        }\n      </ul>\n\n    </div>\n    <div className=\"cart-action\">\n      <h3>\n        Subtotal ( {cartItems.reduce((a, c) => a + parseInt(c.qty), 0)} items)\n        :\n         $ {cartItems.reduce((a, c) => a + c.price * c.qty, 0)}\n      </h3>\n      <button onClick={checkoutHandler} className=\"button primary full-width\" disabled={cartItems.length === 0}>\n        Proceed to Checkout\n      </button>\n\n    </div>\n\n  </div>\n}\n\nexport default CartScreen;"]},"metadata":{},"sourceType":"module"}